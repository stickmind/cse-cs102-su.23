<?xml version="1.0" encoding="UTF-8"?>
<!--
 """ To recover the Python script to generate this SVG, delete the line above -->
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" viewBox="-140 -80 1110 2220"><script xmlns=""/>
 <title>binary guess number trick SMIL</title>
 <desc>Example of a party trick to guess the day of month using binary numbers by CMG Lee. In the SVG file, click each card to specify whether the number is on it. The prediction is the number which is not struck out.</desc>
 <style type="text/css">
.main { font-family:Helvetica,Arial,sans-serif; font-size:90px; letter-spacing:-4px; text-anchor:middle; fill:#000000; stroke:none; stroke-width:9; }
.bold { font-weight:bold; }
text  { stroke:none; pointer-events:none; }
 </style>
 <defs>
  <rect id="card" x="-100" y="-60" width="650" height="420" rx="50" ry="50"/>
  <path id="cancel" d="M -58,-17 h 120" stroke-linecap="round"/>
 </defs>
 <g class="main">
  <circle cx="0" cy="0" r="99999" fill="#ffffff"/>
<!-- BEGIN_DYNAMIC_SVG { -->
  <text transform="translate(670,250)" dy="0.7ex">0</text>
  <text transform="translate(670,370)" dy="0.7ex">1</text>
  <text transform="translate(670,490)" dy="0.7ex">2</text>
  <text transform="translate(670,610)" dy="0.7ex">3</text>
  <text transform="translate(670,730)" dy="0.7ex">4</text>
  <text transform="translate(670,850)" dy="0.7ex">5</text>
  <text transform="translate(670,970)" dy="0.7ex">6</text>
  <text transform="translate(670,1090)" dy="0.7ex">7</text>
  <text transform="translate(670,1210)" dy="0.7ex">8</text>
  <text transform="translate(670,1330)" dy="0.7ex">9</text>
  <text transform="translate(670,1450)" dy="0.7ex">10</text>
  <text transform="translate(670,1570)" dy="0.7ex">11</text>
  <text transform="translate(670,1690)" dy="0.7ex">12</text>
  <text transform="translate(670,1810)" dy="0.7ex">13</text>
  <text transform="translate(670,1930)" dy="0.7ex">14</text>
  <text transform="translate(670,2050)" dy="0.7ex">15</text>
  <text transform="translate(840,250)" dy="0.7ex">16</text>
  <text transform="translate(840,370)" dy="0.7ex">17</text>
  <text transform="translate(840,490)" dy="0.7ex">18</text>
  <text transform="translate(840,610)" dy="0.7ex">19</text>
  <text transform="translate(840,730)" dy="0.7ex">20</text>
  <text transform="translate(840,850)" dy="0.7ex">21</text>
  <text transform="translate(840,970)" dy="0.7ex">22</text>
  <text transform="translate(840,1090)" dy="0.7ex">23</text>
  <text transform="translate(840,1210)" dy="0.7ex">24</text>
  <text transform="translate(840,1330)" dy="0.7ex">25</text>
  <text transform="translate(840,1450)" dy="0.7ex">26</text>
  <text transform="translate(840,1570)" dy="0.7ex">27</text>
  <text transform="translate(840,1690)" dy="0.7ex">28</text>
  <text transform="translate(840,1810)" dy="0.7ex">29</text>
  <text transform="translate(840,1930)" dy="0.7ex">30</text>
  <text transform="translate(840,2050)" dy="0.7ex">31</text>
  <g id="base0" transform="translate(0,0)" cursor="pointer">
   <use xlink:href="#card" fill="#ff0000" fill-opacity="0.5"/>
   <text transform="translate(0,0)" dy="0.7ex" class="bold">1</text>
   <text transform="translate(150,0)" dy="0.7ex">3</text>
   <text transform="translate(300,0)" dy="0.7ex">5</text>
   <text transform="translate(450,0)" dy="0.7ex">7</text>
   <text transform="translate(0,100)" dy="0.7ex">9</text>
   <text transform="translate(150,100)" dy="0.7ex">11</text>
   <text transform="translate(300,100)" dy="0.7ex">13</text>
   <text transform="translate(450,100)" dy="0.7ex">15</text>
   <text transform="translate(0,200)" dy="0.7ex">17</text>
   <text transform="translate(150,200)" dy="0.7ex">19</text>
   <text transform="translate(300,200)" dy="0.7ex">21</text>
   <text transform="translate(450,200)" dy="0.7ex">23</text>
   <text transform="translate(0,300)" dy="0.7ex">25</text>
   <text transform="translate(150,300)" dy="0.7ex">27</text>
   <text transform="translate(300,300)" dy="0.7ex">29</text>
   <text transform="translate(450,300)" dy="0.7ex">31</text>
  </g>
  <g id="incl0" stroke="#ff0000" transform="translate(0,0)">
   <text transform="translate(600,20)" dy="0.7ex" text-anchor="start"><tspan>+</tspan><tspan class="bold">1</tspan></text>
   <use xlink:href="#cancel" transform="translate(670,250)"/>
   <use xlink:href="#cancel" transform="translate(670,490)"/>
   <use xlink:href="#cancel" transform="translate(670,730)"/>
   <use xlink:href="#cancel" transform="translate(670,970)"/>
   <use xlink:href="#cancel" transform="translate(670,1210)"/>
   <use xlink:href="#cancel" transform="translate(670,1450)"/>
   <use xlink:href="#cancel" transform="translate(670,1690)"/>
   <use xlink:href="#cancel" transform="translate(670,1930)"/>
   <use xlink:href="#cancel" transform="translate(840,250)"/>
   <use xlink:href="#cancel" transform="translate(840,490)"/>
   <use xlink:href="#cancel" transform="translate(840,730)"/>
   <use xlink:href="#cancel" transform="translate(840,970)"/>
   <use xlink:href="#cancel" transform="translate(840,1210)"/>
   <use xlink:href="#cancel" transform="translate(840,1450)"/>
   <use xlink:href="#cancel" transform="translate(840,1690)"/>
   <use xlink:href="#cancel" transform="translate(840,1930)"/>
   <set attributeName="visibility" to="hidden" begin="base0.click" end="excl0.click"/>
  </g>
  <g id="base1" transform="translate(0,440)" cursor="pointer">
   <use xlink:href="#card" fill="#cc6600" fill-opacity="0.5"/>
   <text transform="translate(0,0)" dy="0.7ex" class="bold">2</text>
   <text transform="translate(150,0)" dy="0.7ex">3</text>
   <text transform="translate(300,0)" dy="0.7ex">6</text>
   <text transform="translate(450,0)" dy="0.7ex">7</text>
   <text transform="translate(0,100)" dy="0.7ex">10</text>
   <text transform="translate(150,100)" dy="0.7ex">11</text>
   <text transform="translate(300,100)" dy="0.7ex">14</text>
   <text transform="translate(450,100)" dy="0.7ex">15</text>
   <text transform="translate(0,200)" dy="0.7ex">18</text>
   <text transform="translate(150,200)" dy="0.7ex">19</text>
   <text transform="translate(300,200)" dy="0.7ex">22</text>
   <text transform="translate(450,200)" dy="0.7ex">23</text>
   <text transform="translate(0,300)" dy="0.7ex">26</text>
   <text transform="translate(150,300)" dy="0.7ex">27</text>
   <text transform="translate(300,300)" dy="0.7ex">30</text>
   <text transform="translate(450,300)" dy="0.7ex">31</text>
  </g>
  <g id="incl1" stroke="#cc6600" transform="translate(0,8)">
   <text transform="translate(700,12)" dy="0.7ex" text-anchor="start"><tspan>+</tspan><tspan class="bold">2</tspan></text>
   <use xlink:href="#cancel" transform="translate(670,250)"/>
   <use xlink:href="#cancel" transform="translate(670,370)"/>
   <use xlink:href="#cancel" transform="translate(670,730)"/>
   <use xlink:href="#cancel" transform="translate(670,850)"/>
   <use xlink:href="#cancel" transform="translate(670,1210)"/>
   <use xlink:href="#cancel" transform="translate(670,1330)"/>
   <use xlink:href="#cancel" transform="translate(670,1690)"/>
   <use xlink:href="#cancel" transform="translate(670,1810)"/>
   <use xlink:href="#cancel" transform="translate(840,250)"/>
   <use xlink:href="#cancel" transform="translate(840,370)"/>
   <use xlink:href="#cancel" transform="translate(840,730)"/>
   <use xlink:href="#cancel" transform="translate(840,850)"/>
   <use xlink:href="#cancel" transform="translate(840,1210)"/>
   <use xlink:href="#cancel" transform="translate(840,1330)"/>
   <use xlink:href="#cancel" transform="translate(840,1690)"/>
   <use xlink:href="#cancel" transform="translate(840,1810)"/>
   <set attributeName="visibility" to="hidden" begin="base1.click;0s" end="excl1.click"/>
  </g>
  <g id="base2" transform="translate(0,880)" cursor="pointer">
   <use xlink:href="#card" fill="#009900" fill-opacity="0.5"/>
   <text transform="translate(0,0)" dy="0.7ex" class="bold">4</text>
   <text transform="translate(150,0)" dy="0.7ex">5</text>
   <text transform="translate(300,0)" dy="0.7ex">6</text>
   <text transform="translate(450,0)" dy="0.7ex">7</text>
   <text transform="translate(0,100)" dy="0.7ex">12</text>
   <text transform="translate(150,100)" dy="0.7ex">13</text>
   <text transform="translate(300,100)" dy="0.7ex">14</text>
   <text transform="translate(450,100)" dy="0.7ex">15</text>
   <text transform="translate(0,200)" dy="0.7ex">20</text>
   <text transform="translate(150,200)" dy="0.7ex">21</text>
   <text transform="translate(300,200)" dy="0.7ex">22</text>
   <text transform="translate(450,200)" dy="0.7ex">23</text>
   <text transform="translate(0,300)" dy="0.7ex">28</text>
   <text transform="translate(150,300)" dy="0.7ex">29</text>
   <text transform="translate(300,300)" dy="0.7ex">30</text>
   <text transform="translate(450,300)" dy="0.7ex">31</text>
  </g>
  <g id="incl2" stroke="#009900" transform="translate(0,16)">
   <text transform="translate(800,4)" dy="0.7ex" text-anchor="start"><tspan>+</tspan><tspan class="bold">4</tspan></text>
   <use xlink:href="#cancel" transform="translate(670,250)"/>
   <use xlink:href="#cancel" transform="translate(670,370)"/>
   <use xlink:href="#cancel" transform="translate(670,490)"/>
   <use xlink:href="#cancel" transform="translate(670,610)"/>
   <use xlink:href="#cancel" transform="translate(670,1210)"/>
   <use xlink:href="#cancel" transform="translate(670,1330)"/>
   <use xlink:href="#cancel" transform="translate(670,1450)"/>
   <use xlink:href="#cancel" transform="translate(670,1570)"/>
   <use xlink:href="#cancel" transform="translate(840,250)"/>
   <use xlink:href="#cancel" transform="translate(840,370)"/>
   <use xlink:href="#cancel" transform="translate(840,490)"/>
   <use xlink:href="#cancel" transform="translate(840,610)"/>
   <use xlink:href="#cancel" transform="translate(840,1210)"/>
   <use xlink:href="#cancel" transform="translate(840,1330)"/>
   <use xlink:href="#cancel" transform="translate(840,1450)"/>
   <use xlink:href="#cancel" transform="translate(840,1570)"/>
   <set attributeName="visibility" to="hidden" begin="base2.click;0s" end="excl2.click"/>
  </g>
  <g id="base3" transform="translate(0,1320)" cursor="pointer">
   <use xlink:href="#card" fill="#0033ff" fill-opacity="0.5"/>
   <text transform="translate(0,0)" dy="0.7ex" class="bold">8</text>
   <text transform="translate(150,0)" dy="0.7ex">9</text>
   <text transform="translate(300,0)" dy="0.7ex">10</text>
   <text transform="translate(450,0)" dy="0.7ex">11</text>
   <text transform="translate(0,100)" dy="0.7ex">12</text>
   <text transform="translate(150,100)" dy="0.7ex">13</text>
   <text transform="translate(300,100)" dy="0.7ex">14</text>
   <text transform="translate(450,100)" dy="0.7ex">15</text>
   <text transform="translate(0,200)" dy="0.7ex">24</text>
   <text transform="translate(150,200)" dy="0.7ex">25</text>
   <text transform="translate(300,200)" dy="0.7ex">26</text>
   <text transform="translate(450,200)" dy="0.7ex">27</text>
   <text transform="translate(0,300)" dy="0.7ex">28</text>
   <text transform="translate(150,300)" dy="0.7ex">29</text>
   <text transform="translate(300,300)" dy="0.7ex">30</text>
   <text transform="translate(450,300)" dy="0.7ex">31</text>
  </g>
  <g id="incl3" stroke="#0033ff" transform="translate(0,24)">
   <text transform="translate(600,96)" dy="0.7ex" text-anchor="start"><tspan>+</tspan><tspan class="bold">8</tspan></text>
   <use xlink:href="#cancel" transform="translate(670,250)"/>
   <use xlink:href="#cancel" transform="translate(670,370)"/>
   <use xlink:href="#cancel" transform="translate(670,490)"/>
   <use xlink:href="#cancel" transform="translate(670,610)"/>
   <use xlink:href="#cancel" transform="translate(670,730)"/>
   <use xlink:href="#cancel" transform="translate(670,850)"/>
   <use xlink:href="#cancel" transform="translate(670,970)"/>
   <use xlink:href="#cancel" transform="translate(670,1090)"/>
   <use xlink:href="#cancel" transform="translate(840,250)"/>
   <use xlink:href="#cancel" transform="translate(840,370)"/>
   <use xlink:href="#cancel" transform="translate(840,490)"/>
   <use xlink:href="#cancel" transform="translate(840,610)"/>
   <use xlink:href="#cancel" transform="translate(840,730)"/>
   <use xlink:href="#cancel" transform="translate(840,850)"/>
   <use xlink:href="#cancel" transform="translate(840,970)"/>
   <use xlink:href="#cancel" transform="translate(840,1090)"/>
   <set attributeName="visibility" to="hidden" begin="base3.click;0s" end="excl3.click"/>
  </g>
  <g id="base4" transform="translate(0,1760)" cursor="pointer">
   <use xlink:href="#card" fill="#cc00ff" fill-opacity="0.5"/>
   <text transform="translate(0,0)" dy="0.7ex" class="bold">16</text>
   <text transform="translate(150,0)" dy="0.7ex">17</text>
   <text transform="translate(300,0)" dy="0.7ex">18</text>
   <text transform="translate(450,0)" dy="0.7ex">19</text>
   <text transform="translate(0,100)" dy="0.7ex">20</text>
   <text transform="translate(150,100)" dy="0.7ex">21</text>
   <text transform="translate(300,100)" dy="0.7ex">22</text>
   <text transform="translate(450,100)" dy="0.7ex">23</text>
   <text transform="translate(0,200)" dy="0.7ex">24</text>
   <text transform="translate(150,200)" dy="0.7ex">25</text>
   <text transform="translate(300,200)" dy="0.7ex">26</text>
   <text transform="translate(450,200)" dy="0.7ex">27</text>
   <text transform="translate(0,300)" dy="0.7ex">28</text>
   <text transform="translate(150,300)" dy="0.7ex">29</text>
   <text transform="translate(300,300)" dy="0.7ex">30</text>
   <text transform="translate(450,300)" dy="0.7ex">31</text>
  </g>
  <g id="incl4" stroke="#cc00ff" transform="translate(0,32)">
   <text transform="translate(700,88)" dy="0.7ex" text-anchor="start"><tspan>+</tspan><tspan class="bold">16</tspan></text>
   <use xlink:href="#cancel" transform="translate(670,250)"/>
   <use xlink:href="#cancel" transform="translate(670,370)"/>
   <use xlink:href="#cancel" transform="translate(670,490)"/>
   <use xlink:href="#cancel" transform="translate(670,610)"/>
   <use xlink:href="#cancel" transform="translate(670,730)"/>
   <use xlink:href="#cancel" transform="translate(670,850)"/>
   <use xlink:href="#cancel" transform="translate(670,970)"/>
   <use xlink:href="#cancel" transform="translate(670,1090)"/>
   <use xlink:href="#cancel" transform="translate(670,1210)"/>
   <use xlink:href="#cancel" transform="translate(670,1330)"/>
   <use xlink:href="#cancel" transform="translate(670,1450)"/>
   <use xlink:href="#cancel" transform="translate(670,1570)"/>
   <use xlink:href="#cancel" transform="translate(670,1690)"/>
   <use xlink:href="#cancel" transform="translate(670,1810)"/>
   <use xlink:href="#cancel" transform="translate(670,1930)"/>
   <use xlink:href="#cancel" transform="translate(670,2050)"/>
   <set attributeName="visibility" to="hidden" begin="base4.click;0s" end="excl4.click"/>
  </g>
  <g id="excl0" stroke="#ff0000" cursor="pointer" visibility="hidden">
   <use xlink:href="#card" fill="#ffffff" fill-opacity="0.75" transform="translate(0,0)"/>
   <g transform="translate(0,0)">
   <use xlink:href="#cancel" transform="translate(670,370)"/>
   <use xlink:href="#cancel" transform="translate(670,610)"/>
   <use xlink:href="#cancel" transform="translate(670,850)"/>
   <use xlink:href="#cancel" transform="translate(670,1090)"/>
   <use xlink:href="#cancel" transform="translate(670,1330)"/>
   <use xlink:href="#cancel" transform="translate(670,1570)"/>
   <use xlink:href="#cancel" transform="translate(670,1810)"/>
   <use xlink:href="#cancel" transform="translate(670,2050)"/>
   <use xlink:href="#cancel" transform="translate(840,370)"/>
   <use xlink:href="#cancel" transform="translate(840,610)"/>
   <use xlink:href="#cancel" transform="translate(840,850)"/>
   <use xlink:href="#cancel" transform="translate(840,1090)"/>
   <use xlink:href="#cancel" transform="translate(840,1330)"/>
   <use xlink:href="#cancel" transform="translate(840,1570)"/>
   <use xlink:href="#cancel" transform="translate(840,1810)"/>
   <use xlink:href="#cancel" transform="translate(840,2050)"/>
   </g>
   <set attributeName="visibility" to="visible" begin="base0.click" end="excl0.click"/>
  </g>
  <g id="excl1" stroke="#cc6600" cursor="pointer" visibility="hidden">
   <use xlink:href="#card" fill="#ffffff" fill-opacity="0.75" transform="translate(0,440)"/>
   <g transform="translate(0,8)">
   <use xlink:href="#cancel" transform="translate(670,490)"/>
   <use xlink:href="#cancel" transform="translate(670,610)"/>
   <use xlink:href="#cancel" transform="translate(670,970)"/>
   <use xlink:href="#cancel" transform="translate(670,1090)"/>
   <use xlink:href="#cancel" transform="translate(670,1450)"/>
   <use xlink:href="#cancel" transform="translate(670,1570)"/>
   <use xlink:href="#cancel" transform="translate(670,1930)"/>
   <use xlink:href="#cancel" transform="translate(670,2050)"/>
   <use xlink:href="#cancel" transform="translate(840,490)"/>
   <use xlink:href="#cancel" transform="translate(840,610)"/>
   <use xlink:href="#cancel" transform="translate(840,970)"/>
   <use xlink:href="#cancel" transform="translate(840,1090)"/>
   <use xlink:href="#cancel" transform="translate(840,1450)"/>
   <use xlink:href="#cancel" transform="translate(840,1570)"/>
   <use xlink:href="#cancel" transform="translate(840,1930)"/>
   <use xlink:href="#cancel" transform="translate(840,2050)"/>
   </g>
   <set attributeName="visibility" to="visible" begin="base1.click;0s" end="excl1.click"/>
  </g>
  <g id="excl2" stroke="#009900" cursor="pointer" visibility="hidden">
   <use xlink:href="#card" fill="#ffffff" fill-opacity="0.75" transform="translate(0,880)"/>
   <g transform="translate(0,16)">
   <use xlink:href="#cancel" transform="translate(670,730)"/>
   <use xlink:href="#cancel" transform="translate(670,850)"/>
   <use xlink:href="#cancel" transform="translate(670,970)"/>
   <use xlink:href="#cancel" transform="translate(670,1090)"/>
   <use xlink:href="#cancel" transform="translate(670,1690)"/>
   <use xlink:href="#cancel" transform="translate(670,1810)"/>
   <use xlink:href="#cancel" transform="translate(670,1930)"/>
   <use xlink:href="#cancel" transform="translate(670,2050)"/>
   <use xlink:href="#cancel" transform="translate(840,730)"/>
   <use xlink:href="#cancel" transform="translate(840,850)"/>
   <use xlink:href="#cancel" transform="translate(840,970)"/>
   <use xlink:href="#cancel" transform="translate(840,1090)"/>
   <use xlink:href="#cancel" transform="translate(840,1690)"/>
   <use xlink:href="#cancel" transform="translate(840,1810)"/>
   <use xlink:href="#cancel" transform="translate(840,1930)"/>
   <use xlink:href="#cancel" transform="translate(840,2050)"/>
   </g>
   <set attributeName="visibility" to="visible" begin="base2.click;0s" end="excl2.click"/>
  </g>
  <g id="excl3" stroke="#0033ff" cursor="pointer" visibility="hidden">
   <use xlink:href="#card" fill="#ffffff" fill-opacity="0.75" transform="translate(0,1320)"/>
   <g transform="translate(0,24)">
   <use xlink:href="#cancel" transform="translate(670,1210)"/>
   <use xlink:href="#cancel" transform="translate(670,1330)"/>
   <use xlink:href="#cancel" transform="translate(670,1450)"/>
   <use xlink:href="#cancel" transform="translate(670,1570)"/>
   <use xlink:href="#cancel" transform="translate(670,1690)"/>
   <use xlink:href="#cancel" transform="translate(670,1810)"/>
   <use xlink:href="#cancel" transform="translate(670,1930)"/>
   <use xlink:href="#cancel" transform="translate(670,2050)"/>
   <use xlink:href="#cancel" transform="translate(840,1210)"/>
   <use xlink:href="#cancel" transform="translate(840,1330)"/>
   <use xlink:href="#cancel" transform="translate(840,1450)"/>
   <use xlink:href="#cancel" transform="translate(840,1570)"/>
   <use xlink:href="#cancel" transform="translate(840,1690)"/>
   <use xlink:href="#cancel" transform="translate(840,1810)"/>
   <use xlink:href="#cancel" transform="translate(840,1930)"/>
   <use xlink:href="#cancel" transform="translate(840,2050)"/>
   </g>
   <set attributeName="visibility" to="visible" begin="base3.click;0s" end="excl3.click"/>
  </g>
  <g id="excl4" stroke="#cc00ff" cursor="pointer" visibility="hidden">
   <use xlink:href="#card" fill="#ffffff" fill-opacity="0.75" transform="translate(0,1760)"/>
   <g transform="translate(0,32)">
   <use xlink:href="#cancel" transform="translate(840,250)"/>
   <use xlink:href="#cancel" transform="translate(840,370)"/>
   <use xlink:href="#cancel" transform="translate(840,490)"/>
   <use xlink:href="#cancel" transform="translate(840,610)"/>
   <use xlink:href="#cancel" transform="translate(840,730)"/>
   <use xlink:href="#cancel" transform="translate(840,850)"/>
   <use xlink:href="#cancel" transform="translate(840,970)"/>
   <use xlink:href="#cancel" transform="translate(840,1090)"/>
   <use xlink:href="#cancel" transform="translate(840,1210)"/>
   <use xlink:href="#cancel" transform="translate(840,1330)"/>
   <use xlink:href="#cancel" transform="translate(840,1450)"/>
   <use xlink:href="#cancel" transform="translate(840,1570)"/>
   <use xlink:href="#cancel" transform="translate(840,1690)"/>
   <use xlink:href="#cancel" transform="translate(840,1810)"/>
   <use xlink:href="#cancel" transform="translate(840,1930)"/>
   <use xlink:href="#cancel" transform="translate(840,2050)"/>
   </g>
   <set attributeName="visibility" to="visible" begin="base4.click;0s" end="excl4.click"/>
  </g>
<!-- } END_DYNAMIC_SVG -->
  <text transform="translate(880,120)" dy="0.7ex">=</text>
 </g>
</svg>
<!-- Please retain this and other comments, which contain Python code to generate this SVG. """
import re, math

class dict2class(dict): ## http://stackoverflow.com/questions/16237659
 def __getattr__(self, key): return self[key]

def fmt(string): ## string.format(**vars()) using tags {expression!format} by CMG Lee
 def f(tag): i_sep = tag.rfind('!'); return (re.sub('\.0+$', '', str(eval(tag[1:-1])))
  if (i_sep < 0) else ('{:%s}' % tag[i_sep + 1:-1]).format(eval(tag[1:i_sep])))
 return (re.sub(r'(?<!{){[^{}]+}', lambda m:f(m.group()), string)
         .replace('{{', '{').replace('}}', '}'))
def append(obj, string): return obj.append(fmt(string))
def format_tab(*arg): return '\t'.join([str(el) for el in (arg if len(arg) > 1 else arg[0])])
def hex_rgb(colour): ## convert [#]RGB to #RRGGBB and [#]RRGGBB to #RRGGBB
 return '#%s' % (colour if len(colour) > 4 else ''.join([c*2 for c in colour])).strip('#')

colours    = [hex_rgb(colour) for colour in ['f00','c60','090','03f','c0f']]
n_col      = 4
n          = 31
n_row      = 16
dy_card    = 440
n_card     = len(colours)
out_basess = [[] for i_card in range(n_card)]
out_exclss = [[] for i_card in range(n_card)]
out_inclss = [[fmt('''\
   <text transform="translate({(i_card % 3) * 100 + 600},{(i_card // 3) * 100 - i_card * 8 + 20})" dy="0.7ex" text-anchor="start"><tspan>+</tspan><tspan class="bold">{1 << i_card}</tspan></text>'''
              )] for i_card in range(n_card)]
outs       = []

for i in range(n + 1):
 out_transform = fmt('transform="translate({i // n_row * 170 + 670},{(i % n_row) * 120 + 250})"')
 append(outs, '''\
  <text {out_transform} dy="0.7ex">{i}</text>''')
 for i_card in range(n_card):
  if (i & (1 << i_card)):
   i_n = len(out_basess[i_card])
   out_style = ''' class="bold"''' if i_n == 0 else ''
   append(out_basess[i_card], '''\
   <text transform="translate({(i_n % n_col) * 150},{int(i_n / n_col) * 100})" dy="0.7ex"{out_style}>{i}</text>''')
   append(out_exclss[i_card], '''\
   <use xlink:href="#cancel" {out_transform}/>''')
  else:
   append(out_inclss[i_card], '''\
   <use xlink:href="#cancel" {out_transform}/>''')

for i_card in range(n_card):
 out_begin_at_0s = ';0s' if i_card > 0 else ''
 # print(format_tab([i_card,len(cardss[i_card]),cardss[i_card]]))
 append(outs, '''\
  <g id="base{i_card}" transform="translate(0,{i_card * dy_card})" cursor="pointer">
   <use xlink:href="#card" fill="{colours[i_card]}" fill-opacity="0.5"/>
{'\\n'.join(out_basess[i_card])}
  </g>
  <g id="incl{i_card}" stroke="{colours[i_card]}" transform="translate(0,{i_card * 8})">
{'\\n'.join(out_inclss[i_card])}
   <set attributeName="visibility" to="hidden" begin="base{i_card}.click{out_begin_at_0s}" end="excl{i_card}.click"/>
  </g>''')
for i_card in range(n_card):
 out_begin_at_0s = ';0s' if i_card > 0 else ''
 append(outs, '''\
  <g id="excl{i_card}" stroke="{colours[i_card]}" cursor="pointer" visibility="hidden">
   <use xlink:href="#card" fill="#ffffff" fill-opacity="0.75" transform="translate(0,{i_card * dy_card})"/>
   <g transform="translate(0,{i_card * 8})">
{'\\n'.join(out_exclss[i_card])}
   </g>
   <set attributeName="visibility" to="visible" begin="base{i_card}.click{out_begin_at_0s}" end="excl{i_card}.click"/>
  </g>''')

out_size = 'width="100%" height="100%" viewBox="-140 -80 1110 2220"'

## Compile everything into an .svg file
myself   = open(__file__, 'r').read() ## the contents of this very file
file_out = open(__file__[:__file__.rfind('.')] + '.svg', 'w') ## *.* -> *.svg
try: ## use try/finally so that file is closed even if write fails
 file_out.write('''<?xml version="1.0" encoding="utf-8"?><!%s
 %s%s%s\n%s%s''' % ('-' + '-', ## because SVG comments cannot have 2 consecutive '-'s
  myself[ : myself.find('width',myself.find('<svg'))], ## assume width specified before height/viewBox
  out_size, ## replace SVG width/height/viewBox with {out_size} & dynamic SVG block with {outs} content
  myself[myself.find('>',myself.find('<svg')) : myself.find('\n',myself.find('BEGIN_'+'DYNAMIC_SVG'))],
  '\n'.join(outs), myself[myself.rfind('\n',0,myself.find('END_'+'DYNAMIC_SVG')) : ]))
finally:
 file_out.close()
## SVG-Python near-polyglot framework version 2 by CMG Lee (Feb 2016) -->